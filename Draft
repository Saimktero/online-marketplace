from django.contrib.auth.models import User
user = User.objects.create_user(username="testuser2", password="password123")


order = Order.objects.create(user=user)
order.product.add(product1, product2)


from core.tasks import add
result = add.delay(5, 10)
print(result.get(timeout=5))



from django.core.mail import send_mail
send_mail(
    "–¢–µ—Å—Ç–æ–≤–æ–µ –ø–∏—Å—å–º–æ",
    "–ü—Ä–∏–≤–µ—Ç! –≠—Ç–æ —Ç–µ—Å—Ç–æ–≤–æ–µ –ø–∏—Å—å–º–æ –∏–∑ Django.",
    "priluckijkirill30@gmail.com",
    ["priluckijkirill30@gmail.com"],
    fail_silently=False,
)


# –û—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø—Ä–∏ –∑–∞–∫–∞–∑–µ –Ω–∞ email
from core.models import Order, User
from core.tasks import send_order_confirmation_email
# –°–æ–∑–¥–∞—ë–º –∑–∞–∫–∞–∑ –≤—Ä—É—á–Ω—É—é
user = User.objects.first()  # –ë–µ—Ä—ë–º –ø–µ—Ä–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
order = Order.objects.create(user=user)
# –ó–∞–ø—É—Å–∫–∞–µ–º –∑–∞–¥–∞—á—É –≤—Ä—É—á–Ω—É—é
send_order_confirmation_email.delay(user.email)


# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—á—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
from django.contrib.auth.models import User
user = User.objects.get(id=3)  # –ü–æ–¥—Å—Ç–∞–≤—å –Ω—É–∂–Ω—ã–π ID
print(f"Email –∏–∑ –±–∞–∑—ã: '{user.email}'")


# –ü—É—Ç—å –∫ —Ä–∞–±–æ—á–µ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
cd /mnt/c/PycharmProjects/Kirill


# –ó–∞–ø—É—Å–∫ Redis
redis-server --daemonize yes


# –ó–∞–ø—É—Å–∫ Celery-–≤–æ—Ä–∫–µ—Ä–∞
celery -A marketplace worker --loglevel=info


print("üîç API –æ—Ç–≤–µ—Ç:", response.data)  # –õ–æ–≥–∏—Ä—É–µ–º –æ—Ç–≤–µ—Ç API
print("üîç –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–π –≤ –æ—Ç–≤–µ—Ç–µ:", len(response.data))